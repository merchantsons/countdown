<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Countdown Timer Python</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&display=swap');

        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            height: 100vh;
            margin: 0; 
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .container {
            text-align: center;
            padding: 2rem;
            border-radius: 1rem;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            width: 90%;
        }

        .head1 {
            color: #fff;
            font-weight: 600;
            text-align: center;
            font-size: 3vmin;
            text-decoration: underline;
            text-decoration-thickness: 0.5px;
            margin-bottom: 0.5rem;
        }

        .head2 {
            color: #ffffff;
            background-color: #1f522e;
            font-weight: 600;
            text-align: center;
            font-size: 2vmin;
            margin-bottom: 0.5rem;
        }

        .head3 {
            color: #fff;
            margin-top: -0.6vmin;
            text-align: center;
            margin-bottom: 1rem;
            font-weight: 300;
            font-size: 2vmin;
        }

        .footer {
            color: #fff;
            text-align: center;
            font-size: 1.5vmin;
            margin-top: 2rem;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 2rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .countdown {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .time-segment {
            position: relative;
            width: 120px;
            height: 120px;
            perspective: 400px;
        }

        .time-card {
            width: 100%;
            height: 100%;
            border-radius: 10px;
            background: linear-gradient(145deg, #9d50bb, #6e48aa);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .time-card:hover {
            transform: rotateY(10deg) rotateX(10deg);
        }

        .time-value {
            font-size: 3rem;
            font-weight: bold;
            margin: 0;
        }

        .time-label {
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-top: 0.5rem;
            opacity: 0.8;
        }

        form {
            margin-top: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        input {
            padding: 1rem;
            border-radius: 50px;
            border: none;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            width: 80%;
            font-size: 1rem;
            text-align: center;
        }

        input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.3);
        }

        button {
            padding: 1rem 2rem;
            border-radius: 50px;
            border: none;
            background: linear-gradient(to right, #fc6076, #ff9a44);
            color: white;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(252, 96, 118, 0.4);
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(252, 96, 118, 0.6);
        }

        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .message {
            margin-top: 2rem;
            font-size: 1.5rem;
            font-weight: bold;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transition: opacity 0.5s;
        }

        .visible {
            opacity: 1;
        }

        .fa-icon {
            margin-right: 0.5rem;
        }

        @media (max-width: 768px) {
            .time-segment {
                width: 90px;
                height: 90px;
            }

            .time-value {
                font-size: 2.2rem;
            }

            .time-label {
                font-size: 0.8rem;
            }

            h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>

<body>
    <div class="particles" id="particles-js"></div>
 <div>
        <div style="margin-top: -4vmin; justify-self: center;"><img src="/static/logo.gif" width="200" height="210" alt="GIAIC LOGO" style="display: block;"></div>
        <div class="head1">Project 6: Countdown Timer Python Project</div>
        <div class="head3">FOR GIAIC Q3 - ROLL # 00037391 BY MERCHANTSONS</div>

        <div class="container">
            <h1><i class="fas fa-hourglass-half fa-icon"></i>Fancy Countdown Timer</h1>
            <div class="countdown">
                <div class="time-segment">
                    <div class="time-card">
                        <p class="time-value" id="days">0</p>
                        <p class="time-label">Days</p>
                    </div>
                </div>
                <div class="time-segment">
                    <div class="time-card">
                        <p class="time-value" id="hours">0</p>
                        <p class="time-label">Hours</p>
                    </div>
                </div>
                <div class="time-segment">
                    <div class="time-card">
                        <p class="time-value" id="minutes">0</p>
                        <p class="time-label">Minutes</p>
                    </div>
                </div>
                <div class="time-segment">
                    <div class="time-card">
                        <p class="time-value" id="seconds">0</p>
                        <p class="time-label">Seconds</p>
                    </div>
                </div>
            </div>

            <form id="countdownForm">
                <input type="datetime-local" id="targetDate" required>
                <button type="submit"><i class="fas fa-play fa-icon"></i>Start Countdown</button>
            </form>

            <div class="message" id="message">Countdown Complete!</div>
        </div>
        <div class="footer">Â© Copyright 2025 Merchantsons. All rights reserved.</div>
 </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/particles.js/2.0.0/particles.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize particles.js
            particlesJS('particles-js', {
                "particles": {
                    "number": {
                        "value": 80,
                        "density": {
                            "enable": true,
                            "value_area": 800
                        }
                    },
                    "color": {
                        "value": "#ffffff"
                    },
                    "shape": {
                        "type": "circle",
                        "stroke": {
                            "width": 0,
                            "color": "#000000"
                        },
                    },
                    "opacity": {
                        "value": 0.5,
                        "random": true
                    },
                    "size": {
                        "value": 3,
                        "random": true
                    },
                    "line_linked": {
                        "enable": true,
                        "distance": 150,
                        "color": "#ffffff",
                        "opacity": 0.4,
                        "width": 1
                    },
                    "move": {
                        "enable": true,
                        "speed": 2,
                        "direction": "none",
                        "random": true,
                        "straight": false,
                        "out_mode": "out",
                        "bounce": false
                    }
                },
                "interactivity": {
                    "detect_on": "canvas",
                    "events": {
                        "onhover": {
                            "enable": true,
                            "mode": "grab"
                        },
                        "onclick": {
                            "enable": true,
                            "mode": "push"
                        },
                        "resize": true
                    },
                    "modes": {
                        "grab": {
                            "distance": 140,
                            "line_linked": {
                                "opacity": 1
                            }
                        },
                        "push": {
                            "particles_nb": 4
                        }
                    }
                },
                "retina_detect": true
            });

            let countdownInterval;
            const countdownForm = document.getElementById('countdownForm');
            const message = document.getElementById('message');

            // Set default date to tomorrow
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(0, 0, 0, 0);
            document.getElementById('targetDate').value = tomorrow.toISOString().slice(0, 16);

            countdownForm.addEventListener('submit', function (e) {
                e.preventDefault();

                // Clear any existing interval
                if (countdownInterval) {
                    clearInterval(countdownInterval);
                }

                const targetDate = document.getElementById('targetDate').value;

                if (!targetDate) {
                    alert('Please select a date and time');
                    return;
                }

                message.classList.remove('visible');
                updateCountdown(targetDate);

                // Update every second
                countdownInterval = setInterval(() => {
                    updateCountdown(targetDate);
                }, 1000);
            });

            function updateCountdown(targetDate) {
                fetch('/get_time_left', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ target_date: targetDate })
                })
                    .then(response => response.json())
                    .then(data => {
                        document.getElementById('days').textContent = data.days;
                        document.getElementById('hours').textContent = data.hours;
                        document.getElementById('minutes').textContent = data.minutes;
                        document.getElementById('seconds').textContent = data.seconds;

                        if (data.expired) {
                            if (countdownInterval) {
                                clearInterval(countdownInterval);
                            }
                            message.classList.add('visible');

                            // Add confetti effect when countdown completes
                            celebrateCompletion();
                        }
                    })
                    .catch(error => {
                        console.error('Error fetching countdown data:', error);
                    });
            }

            function celebrateCompletion() {
                // Change particle configuration for celebration
                particlesJS('particles-js', {
                    "particles": {
                        "number": {
                            "value": 200,
                            "density": {
                                "enable": true,
                                "value_area": 800
                            }
                        },
                        "color": {
                            "value": ["#ff0000", "#ffff00", "#00ff00", "#00ffff", "#0000ff", "#ff00ff"]
                        },
                        "shape": {
                            "type": ["circle", "triangle", "star"],
                            "stroke": {
                                "width": 0
                            }
                        },
                        "opacity": {
                            "value": 0.7,
                            "random": true
                        },
                        "size": {
                            "value": 6,
                            "random": true
                        },
                        "line_linked": {
                            "enable": false
                        },
                        "move": {
                            "enable": true,
                            "speed": 8,
                            "direction": "bottom",
                            "random": true,
                            "straight": false,
                            "out_mode": "out",
                            "bounce": false
                        }
                    },
                    "interactivity": {
                        "detect_on": "canvas",
                        "events": {
                            "onhover": {
                                "enable": true,
                                "mode": "repulse"
                            },
                            "onclick": {
                                "enable": true,
                                "mode": "push"
                            }
                        }
                    }
                });

                // Reset to normal particles after 5 seconds
                setTimeout(() => {
                    particlesJS('particles-js', {
                        "particles": {
                            "number": {
                                "value": 80,
                                "density": {
                                    "enable": true,
                                    "value_area": 800
                                }
                            },
                            "color": {
                                "value": "#ffffff"
                            },
                            "shape": {
                                "type": "circle",
                                "stroke": {
                                    "width": 0,
                                    "color": "#000000"
                                },
                            },
                            "opacity": {
                                "value": 0.5,
                                "random": true
                            },
                            "size": {
                                "value": 3,
                                "random": true
                            },
                            "line_linked": {
                                "enable": true,
                                "distance": 150,
                                "color": "#ffffff",
                                "opacity": 0.4,
                                "width": 1
                            },
                            "move": {
                                "enable": true,
                                "speed": 2,
                                "direction": "none",
                                "random": true,
                                "straight": false,
                                "out_mode": "out",
                                "bounce": false
                            }
                        },
                        "interactivity": {
                            "detect_on": "canvas",
                            "events": {
                                "onhover": {
                                    "enable": true,
                                    "mode": "grab"
                                },
                                "onclick": {
                                    "enable": true,
                                    "mode": "push"
                                },
                                "resize": true
                            }
                        }
                    });
                }, 5000);
            }
        });
    </script>

</body>

</html>